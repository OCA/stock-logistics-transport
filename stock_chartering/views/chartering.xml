<odoo>

<record id="chartering_form" model="ir.ui.view">
    <field name="model">chartering</field>
    <field name="arch" type="xml">
        <form>
            <header>
                <button name="ui_picking_action_done" string="Validate all tranfers" />
                <field name="state" widget="statusbar" options="{'clickable': '1'}" />
            </header>
            <sheet>
                <group name="main" cols="4">
                    <group name="left">
                        <field name="name" />
                        <field name="carrier_id" />
                        <field name="departure_id" />
                        <field name="arrival_id" />
                    </group>
                    <group name="right">
                        <field name="boarding_date" />
                        <field name="arrival_date" />
                        <field name="vehicle_id" />
                        <field name="company_id" groups="base.group_multi_company" />
                    </group>
                </group>
                <separator />
                <group name="stock_moves" string="Stock Moves" col="1" cols="1">
                    <field name="stock_move_ids" nolabel="1">
                        <tree default_order="container">
                            <field name="picking_id" />
                            <field name="origin" />
                            <field name="container" />
                            <field name="product_id" />
                            <field name="product_uom_qty" />
                            <field name="state" />
                        </tree>
                    </field>
                </group>
            </sheet>
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers" />
                <field name="message_ids" widget="mail_thread" />
            </div>
        </form>
    </field>
</record>

<record id='chartering_tree' model='ir.ui.view'>
    <field name='model'>chartering</field>
    <field name='arch' type='xml'>
        <tree>
            <field name="name" />
            <field name="boarding_date" />
            <field name="departure_id" />
            <field name="carrier_id" />
            <field name="arrival_id" optional="show" />
            <field name="vehicle_id" optional="show" />
            <field name="state" />
            <field
                    name="company_id"
                    groups="base.group_multi_company"
                    optional="show"
                    readonly="1"
                />
        </tree>
    </field>
</record>

<record id="chartering_search" model="ir.ui.view">
    <field name="model">chartering</field>
    <field name="arch" type="xml">
        <search>
            <field name="carrier_id" string="Charterer" />
            <field name="departure_id" string="Departure" />
            <field name="arrival_id" string="Arrival" />
            <filter
                    name="departure_id"
                    string="Departure"
                    context="{'group_by' : 'departure_id'}"
                />
            <filter
                    name="arrival_id"
                    string="Arrival"
                    context="{'group_by' : 'arrival_id'}"
                />
            <filter
                    name="carrier_id"
                    string="Charterer"
                    context="{'group_by' : 'carrier_id'}"
                />
            <filter name="state" string="State" context="{'group_by' : 'state'}" />
             <filter
                    name="pending_state"
                    string="Pending State"
                    domain="[('state', '=', 'pending')]"
                />
            <filter
                    name="vehicle_id"
                    string="Vehicle"
                    context="{'group_by' : 'vehicle_id'}"
                />
        </search>
    </field>
</record>

<record id="chartering_action" model="ir.actions.act_window">
    <field name="name">Chartering Operations</field>
    <field name="res_model">chartering</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'search_default_pending_state': 1}</field>
</record>

<menuitem
        id="chartering_menu"
        parent="stock.menu_delivery"
        action="chartering_action"
    />

</odoo>
